{let e=function(){let e=$("#new-post-form");e.submit((function(l){l.preventDefault(),$.ajax({type:"post",url:"posts/create",data:e.serialize(),success:function(e){let l=t(e.data.post);$("#post-div-container>ul").prepend(l),o(e.message),n(),s(),c()},error:function(e){console.log(e.responseText)}})}))},t=function(e){return`<li id='post-${e._id}'>\n        <p>    \n        ${e.content} <a class="like-button" href="/likes/toggle/?id=${e._id}&type=Post"> - ${e.likes.length} <i class="fa-solid fa-thumbs-up"></i> Like</a> <br>\n            - ${e.user.name}\n            \n                <a class="delete-post-button" href="/posts/destroy/${e._id}"> - Delete Post</a>\n               \n            <form action='comments/create' id="new-comment-form" method="post">\n                <textarea name="content" cols="20" rows="1" placeholder="Add a Comment...." required></textarea>\n                <input type="hidden" name="post" value="${e._id}">\n                <input type="submit" value="Comment">\n            </form>\n\n            <div id="comment-div-container">\n                <ul id=post-comments-${e._id}>\n                   \n                </ul>\n        \n            </div>\n            \n        </p>\n       \n    </li>\n    `},n=function(){let e=document.querySelectorAll(".delete-post-button");for(var t=0;t<e.length;t++){let n=$(e[t]);n.click((function(e){e.preventDefault(),$.ajax({type:"get",url:n.prop("href"),success:function(e){$(`#post-${e.data.post_id}`).remove(),o(e.message)},error:function(e){console.log(e.responseText)}})}))}},o=function(e){new Noty({theme:"bootstrap-v4",text:e,type:"success",layout:"topRight",timeout:1500}).show()},s=function(){let e=document.querySelectorAll("#new-comment-form");for(let t=0;t<e.length;t++){let n=$(e[t]);n.submit((function(e){e.preventDefault(),$.ajax({type:"post",url:"comments/create",data:n.serialize(),success:function(e){let t=l(e.data.comment),n=e.data.post._id;$(`#comment-div-container #post-comments-${n}`).prepend(t),o(e.message),r(),c()},error:function(e){console.log(e.responseText)}})}))}},l=function(e){return`<li id='comment-${e._id}'>\n        <p>\n            Comment - ${e.content} <a class="like-button" href="/likes/toggle/?id=${e._id}&type=Comment"> - ${e.likes.length} <i class="fa-solid fa-thumbs-up"></i> Like</a> <br>\n            @ ${e.user.name} \n            <a href="/comments/destroy/${e._id}" class="delete-comment-button"> - Delete Comment</a>\n        </p>\n    </li> `},r=function(){let e=document.querySelectorAll(".delete-comment-button");for(var t=0;t<e.length;t++){let n=$(e[t]);n.click((function(e){e.preventDefault(),$.ajax({type:"get",url:n.prop("href"),success:function(e){$(`#comment-${e.data.comment_id}`).remove(),o(e.message)},error:function(e){console.log(e.responseText)}})}))}},c=function(){let e=document.querySelectorAll(".like-button");for(var t=0;t<e.length;t++){let n=$(e[t]);n.click((function(e){e.preventDefault(),$.ajax({type:"post",url:n.prop("href"),success:function(e){o(e.message)},error:function(e){console.log(e.responseText)}})}))}};e(),n(),s(),r(),c()}